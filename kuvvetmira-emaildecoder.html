<!DOCTYPE html>
<html>
<head>
    <title>Decode Email</title>
    <script>
        // URL parametrelerini al
        function getQueryParams() {
            var params = {};
            var queryString = window.location.search.substring(1);
            var vars = queryString.split('&');
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split('=');
                if (typeof params[pair[0]] === 'undefined') {
                    params[pair[0]] = decodeURIComponent(pair[1]);
                } else if (typeof params[pair[0]] === 'string') {
                    var arr = [params[pair[0]], decodeURIComponent(pair[1])];
                    params[pair[0]] = arr;
                } else {
                    params[pair[0]].push(decodeURIComponent(pair[1]));
                }
            }
            return params;
        }

        function decodeCfEmail(encodedEmail) {
            var r = parseInt(encodedEmail.substr(0, 2), 16);
            var email = '';
            for (var n = 2; n < encodedEmail.length; n += 2) {
                var charCode = parseInt(encodedEmail.substr(n, 2), 16) ^ r;
                email += String.fromCharCode(charCode);
            }
            return email;
        }

        function decodeEmail() {
            var input = document.getElementById('cfemail').value;
            if (input) {
                var encodedEmail = input.match(/[a-fA-F0-9]+/);
                if (encodedEmail) {
                    var email = decodeCfEmail(encodedEmail[0]);
                    document.getElementById('decoded-email').textContent = email;
                } else {
                    document.getElementById('decoded-email').textContent = "Geçersiz data-cfemail formatı.";
                }
            } else {
                document.getElementById('decoded-email').textContent = "Lütfen data-cfemail değerini giriniz.";
            }
        }

        // Sayfa yüklendiğinde URL parametresinden cfmail değerini al ve çöz
        window.onload = function() {
            var params = getQueryParams();
            if (params.cfmail) {
                document.getElementById('cfemail').value = params.cfmail;
                decodeEmail();
            }
        }
    </script>
</head>
<body>
    <div>
        <label for="cfemail">Şifreli E-posta (data-cfemail):</label>
        <input type="text" id="cfemail" placeholder="data-cfemail giriniz" />
        <button onclick="decodeEmail()">Çöz</button>
    </div>
    <div>
        <p>Çözülen E-posta: <span id="decoded-email"></span></p>
    </div>
</body>
</html>
